import{s as bt,e as Mt,n as C,h as Gt,b as dt,r as Wt}from"../chunks/utils.js";import{q as ir,H as ur,r as cr,g as b,u as dr,d,v as Jt,i as ne,F as fr,o as pr,b as i,s as _,e as Zt,f as u,c as v,h as l,B,G as Ke,n as St,k as Le,l as $e,w as a,C as G,y as pe,I as Xt,D as hr,m as Yt,x as er}from"../chunks/scheduler.js";import{S as _t,i as vt,b as he,d as me,m as be,a as J,t as X,e as _e,g as mr,c as br,o as _r,p as ft}from"../chunks/index.js";import{h as tr,u as rr}from"../chunks/await_block.js";import{g as vr,u as lr,c as pt,s as ht}from"../chunks/index2.js";import{I as gr}from"../chunks/InputPassword.js";import{S as ar}from"../chunks/SettingsCard.js";import{p as nr}from"../chunks/stores.js";import{n as mt}from"../chunks/notifications.js";import{S as sr}from"../chunks/Spinner.js";import{C as wr}from"../chunks/Collapsible.js";import{T as At,I as kr}from"../chunks/topology-star-3.js";const xr=async()=>({title:"MQTT"}),ul=Object.freeze(Object.defineProperty({__proto__:null,load:xr},Symbol.toStringTag,{value:"Module"}));function Tr(n){let e,r,t='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm6-4v2m-3 8v9m6-9v9M5 16l4-2m6 0l4 2M9 18h6M10 8v.01M14 8v.01"/>',o=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let c=0;c<o.length;c+=1)s=Mt(s,o[c]);return{c(){e=ir("svg"),r=new ur(!0),this.h()},l(c){e=cr(c,"svg",{viewBox:!0,width:!0,height:!0});var p=b(e);r=dr(p,!0),p.forEach(d),this.h()},h(){r.a=null,Jt(e,s)},m(c,p){ne(c,e,p),r.m(t,e)},p(c,[p]){Jt(e,s=vr(o,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p&1&&c[0]]))},i:C,o:C,d(c){c&&d(e)}}}function Er(n,e,r){return n.$$set=t=>{r(0,e=Mt(Mt({},e),Gt(t)))},e=Gt(e),[e]}class Lr extends _t{constructor(e){super(),vt(this,e,Er,Tr,bt,{})}}function $r(n){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function Cr(n){let e,r,t,o,s,c,p,f,y="Status",N,I,k,x,Q,m,O,V,H,Z="Client ID",ce,A,U=n[1].client_id+"",z,D,h;o=new At({props:{class:"h-auto w-full scale-75 "+(n[1].connected===!0?"text-success-content":"text-error-content")}});function F(g,S){return g[1].connected?Mr:g[1].enabled?yr:Ir}let M=F(n),L=M(n);return m=new Lr({props:{class:"text-primary-content h-auto w-full scale-75"}}),{c(){e=i("div"),r=i("div"),t=i("div"),he(o.$$.fragment),c=_(),p=i("div"),f=i("div"),f.textContent=y,N=_(),I=i("div"),L.c(),k=_(),x=i("div"),Q=i("div"),he(m.$$.fragment),O=_(),V=i("div"),H=i("div"),H.textContent=Z,ce=_(),A=i("div"),z=Le(U),this.h()},l(g){e=u(g,"DIV",{class:!0});var S=b(e);r=u(S,"DIV",{class:!0});var j=b(r);t=u(j,"DIV",{class:!0});var Ce=b(t);me(o.$$.fragment,Ce),Ce.forEach(d),c=v(j),p=u(j,"DIV",{});var R=b(p);f=u(R,"DIV",{class:!0,"data-svelte-h":!0}),B(f)!=="svelte-yizsky"&&(f.textContent=y),N=v(R),I=u(R,"DIV",{class:!0});var ee=b(I);L.l(ee),ee.forEach(d),R.forEach(d),j.forEach(d),k=v(S),x=u(S,"DIV",{class:!0});var te=b(x);Q=u(te,"DIV",{class:!0});var re=b(Q);me(m.$$.fragment,re),re.forEach(d),O=v(te),V=u(te,"DIV",{});var P=b(V);H=u(P,"DIV",{class:!0,"data-svelte-h":!0}),B(H)!=="svelte-6cwb7m"&&(H.textContent=Z),ce=v(P),A=u(P,"DIV",{class:!0});var ke=b(A);z=$e(ke,U),ke.forEach(d),P.forEach(d),te.forEach(d),S.forEach(d),this.h()},h(){l(t,"class",s="mask mask-hexagon h-auto w-10 "+(n[1].connected===!0?"bg-success":"bg-error")),l(f,"class","font-bold"),l(I,"class","text-sm opacity-75"),l(r,"class","rounded-box bg-base-100 flex items-center space-x-3 px-4 py-2"),l(Q,"class","mask mask-hexagon bg-primary h-auto w-10"),l(H,"class","font-bold"),l(A,"class","text-sm opacity-75"),l(x,"class","rounded-box bg-base-100 flex items-center space-x-3 px-4 py-2"),l(e,"class","flex w-full flex-col space-y-1")},m(g,S){ne(g,e,S),a(e,r),a(r,t),be(o,t,null),a(r,c),a(r,p),a(p,f),a(p,N),a(p,I),L.m(I,null),a(e,k),a(e,x),a(x,Q),be(m,Q,null),a(x,O),a(x,V),a(V,H),a(V,ce),a(V,A),a(A,z),h=!0},p(g,S){const j={};S&2&&(j.class="h-auto w-full scale-75 "+(g[1].connected===!0?"text-success-content":"text-error-content")),o.$set(j),(!h||S&2&&s!==(s="mask mask-hexagon h-auto w-10 "+(g[1].connected===!0?"bg-success":"bg-error")))&&l(t,"class",s),M===(M=F(g))&&L?L.p(g,S):(L.d(1),L=M(g),L&&(L.c(),L.m(I,null))),(!h||S&2)&&U!==(U=g[1].client_id+"")&&Yt(z,U)},i(g){h||(J(o.$$.fragment,g),J(m.$$.fragment,g),g&&er(()=>{h&&(D||(D=ft(e,ht,{duration:300,easing:pt},!0)),D.run(1))}),h=!0)},o(g){X(o.$$.fragment,g),X(m.$$.fragment,g),g&&(D||(D=ft(e,ht,{duration:300,easing:pt},!1)),D.run(0)),h=!1},d(g){g&&d(e),_e(o),L.d(),_e(m),g&&D&&D.end()}}}function yr(n){let e=n[6][n[1].disconnect_reason]+"",r;return{c(){r=Le(e)},l(t){r=$e(t,e)},m(t,o){ne(t,r,o)},p(t,o){o&2&&e!==(e=t[6][t[1].disconnect_reason]+"")&&Yt(r,e)},d(t){t&&d(r)}}}function Ir(n){let e;return{c(){e=Le("MQTT Disabled")},l(r){e=$e(r,"MQTT Disabled")},m(r,t){ne(r,e,t)},p:C,d(r){r&&d(e)}}}function Mr(n){let e;return{c(){e=Le("Connected")},l(r){e=$e(r,"Connected")},m(r,t){ne(r,e,t)},p:C,d(r){r&&d(e)}}}function Sr(n){let e,r;return e=new sr({}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p:C,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Kt(n){let e,r;return e=new wr({props:{open:!1,class:"shadow-lg",$$slots:{title:[Dr],default:[Ar]},$$scope:{ctx:n}}}),e.$on("closed",n[8]),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p(t,o){const s={};o&8388621&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Ar(n){let e,r,t,o,s,c,p="Enable MQTT",f,y,N,I,k,x='<span class="label-text text-md">Host</span>',Q,m,O,V,H,Z,ce,A,U,z,D,h='<span class="label-text text-md">Port</span>',F,M,L,g,S,j,Ce,R,ee,te,re,P='<span class="label-text text-md">Username</span>',ke,se,xe,le,ve,qe='<span class="label-text text-md">Password</span>',Pe,ae,Be,Te,ye,K,oe='<span class="label-text text-md">Client ID</span>',Ne,de,T,E,fe,Ie,ie,We="Clean Session?",ze,Y,Ee,Xe='<span class="label-text text-md">Keep Alive</span>',Me,ge,W,et,gt,Re,Dt="Seconds",wt,Ve,He,kt,tt,xt,Se,De,qt='<span class="label-text text-md">Max Topic Length</span>',Tt,Ae,ue,rt,Et,Oe,Pt="Chars",Lt,Ue,je,$t,lt,Ct,Ye,yt,Qe,Bt='<button class="btn btn-primary" type="submit">Apply Settings</button>',we,It,Nt;function or(w){n[14](w)}let Vt={id:"pwd"};return n[0].password!==void 0&&(Vt.value=n[0].password),ae=new gr({props:Vt}),St.push(()=>_r(ae,"value",or)),{c(){e=i("form"),r=i("div"),t=i("label"),o=i("input"),s=_(),c=i("span"),c.textContent=p,f=_(),y=i("div"),N=_(),I=i("div"),k=i("label"),k.innerHTML=x,Q=_(),m=i("input"),V=_(),H=i("label"),Z=i("span"),ce=Le("Must be a valid IPv4 address or URL"),U=_(),z=i("div"),D=i("label"),D.innerHTML=h,F=_(),M=i("input"),g=_(),S=i("label"),j=i("span"),Ce=Le("Port number must be between 0 and 65536"),ee=_(),te=i("div"),re=i("label"),re.innerHTML=P,ke=_(),se=i("input"),xe=_(),le=i("div"),ve=i("label"),ve.innerHTML=qe,Pe=_(),he(ae.$$.fragment),Te=_(),ye=i("div"),K=i("label"),K.innerHTML=oe,Ne=_(),de=i("input"),T=_(),E=i("label"),fe=i("input"),Ie=_(),ie=i("span"),ie.textContent=We,ze=_(),Y=i("div"),Ee=i("label"),Ee.innerHTML=Xe,Me=_(),ge=i("label"),W=i("input"),gt=_(),Re=i("span"),Re.textContent=Dt,wt=_(),Ve=i("label"),He=i("span"),kt=Le("Must be between 1 and 600 seconds"),xt=_(),Se=i("div"),De=i("label"),De.innerHTML=qt,Tt=_(),Ae=i("label"),ue=i("input"),Et=_(),Oe=i("span"),Oe.textContent=Pt,Lt=_(),Ue=i("label"),je=i("span"),$t=Le("Must be between 64 and 4096 characters"),Ct=_(),Ye=i("div"),yt=_(),Qe=i("div"),Qe.innerHTML=Bt,this.h()},l(w){e=u(w,"FORM",{});var $=b(e);r=u($,"DIV",{class:!0});var q=b(r);t=u(q,"LABEL",{class:!0});var at=b(t);o=u(at,"INPUT",{type:!0,class:!0}),s=v(at),c=u(at,"SPAN",{"data-svelte-h":!0}),B(c)!=="svelte-1xm9qiz"&&(c.textContent=p),at.forEach(d),f=v(q),y=u(q,"DIV",{class:!0}),b(y).forEach(d),N=v(q),I=u(q,"DIV",{});var Fe=b(I);k=u(Fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(k)!=="svelte-u5fsst"&&(k.innerHTML=x),Q=v(Fe),m=u(Fe,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),V=v(Fe),H=u(Fe,"LABEL",{class:!0,for:!0});var Ht=b(H);Z=u(Ht,"SPAN",{class:!0});var Ut=b(Z);ce=$e(Ut,"Must be a valid IPv4 address or URL"),Ut.forEach(d),Ht.forEach(d),Fe.forEach(d),U=v(q),z=u(q,"DIV",{});var Ge=b(z);D=u(Ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(D)!=="svelte-ai5hrr"&&(D.innerHTML=h),F=v(Ge),M=u(Ge,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),g=v(Ge),S=u(Ge,"LABEL",{for:!0,class:!0});var jt=b(S);j=u(jt,"SPAN",{class:!0});var Qt=b(j);Ce=$e(Qt,"Port number must be between 0 and 65536"),Qt.forEach(d),jt.forEach(d),Ge.forEach(d),ee=v(q),te=u(q,"DIV",{});var nt=b(te);re=u(nt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(re)!=="svelte-w3c29a"&&(re.innerHTML=P),ke=v(nt),se=u(nt,"INPUT",{type:!0,class:!0,id:!0}),nt.forEach(d),xe=v(q),le=u(q,"DIV",{});var st=b(le);ve=u(st,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(ve)!=="svelte-1b9ak8x"&&(ve.innerHTML=qe),Pe=v(st),me(ae.$$.fragment,st),st.forEach(d),Te=v(q),ye=u(q,"DIV",{});var ot=b(ye);K=u(ot,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(K)!=="svelte-qq41wd"&&(K.innerHTML=oe),Ne=v(ot),de=u(ot,"INPUT",{type:!0,class:!0,id:!0}),ot.forEach(d),T=v(q),E=u(q,"LABEL",{class:!0});var it=b(E);fe=u(it,"INPUT",{type:!0,class:!0}),Ie=v(it),ie=u(it,"SPAN",{class:!0,"data-svelte-h":!0}),B(ie)!=="svelte-q37pww"&&(ie.textContent=We),it.forEach(d),ze=v(q),Y=u(q,"DIV",{});var Je=b(Y);Ee=u(Je,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(Ee)!=="svelte-1pztk6r"&&(Ee.innerHTML=Xe),Me=v(Je),ge=u(Je,"LABEL",{for:!0,class:!0});var ut=b(ge);W=u(ut,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),gt=v(ut),Re=u(ut,"SPAN",{"data-svelte-h":!0}),B(Re)!=="svelte-1wvw9tt"&&(Re.textContent=Dt),ut.forEach(d),wt=v(Je),Ve=u(Je,"LABEL",{for:!0,class:!0});var zt=b(Ve);He=u(zt,"SPAN",{class:!0});var Rt=b(He);kt=$e(Rt,"Must be between 1 and 600 seconds"),Rt.forEach(d),zt.forEach(d),Je.forEach(d),xt=v(q),Se=u(q,"DIV",{});var Ze=b(Se);De=u(Ze,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(De)!=="svelte-ahnh9h"&&(De.innerHTML=qt),Tt=v(Ze),Ae=u(Ze,"LABEL",{for:!0,class:!0});var ct=b(Ae);ue=u(ct,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Et=v(ct),Oe=u(ct,"SPAN",{"data-svelte-h":!0}),B(Oe)!=="svelte-ft7p9l"&&(Oe.textContent=Pt),ct.forEach(d),Lt=v(Ze),Ue=u(Ze,"LABEL",{for:!0,class:!0});var Ot=b(Ue);je=u(Ot,"SPAN",{class:!0});var Ft=b(je);$t=$e(Ft,"Must be between 64 and 4096 characters"),Ft.forEach(d),Ot.forEach(d),Ze.forEach(d),q.forEach(d),Ct=v($),Ye=u($,"DIV",{class:!0}),b(Ye).forEach(d),yt=v($),Qe=u($,"DIV",{class:!0,"data-svelte-h":!0}),B(Qe)!=="svelte-19wrugp"&&(Qe.innerHTML=Bt),$.forEach(d),this.h()},h(){l(o,"type","checkbox"),l(o,"class","checkbox checkbox-primary"),l(t,"class","label inline-flex cursor-pointer content-end justify-start gap-4"),l(y,"class","hidden sm:block"),l(k,"class","label"),l(k,"for","host"),l(m,"type","text"),l(m,"class",O="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[3].host?"border-error border-2":"")),l(m,"id","host"),l(m,"min","3"),l(m,"max","64"),m.required=!0,l(Z,"class",A="label-text-alt text-error "+(n[3].host?"":"hidden")),l(H,"class","label"),l(H,"for","host"),l(D,"class","label"),l(D,"for","port"),l(M,"type","number"),l(M,"min","0"),l(M,"max","65536"),l(M,"class",L="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[3].port?"border-error border-2":"")),l(M,"id","port"),M.required=!0,l(j,"class",R="label-text-alt text-error "+(n[3].port?"":"hidden")),l(S,"for","port"),l(S,"class","label"),l(re,"class","label"),l(re,"for","user"),l(se,"type","text"),l(se,"class","input input-bordered w-full"),l(se,"id","user"),l(ve,"class","label"),l(ve,"for","pwd"),l(K,"class","label"),l(K,"for","clientid"),l(de,"type","text"),l(de,"class","input input-bordered w-full"),l(de,"id","clientid"),l(fe,"type","checkbox"),l(fe,"class","checkbox checkbox-primary mt-2 sm:-mb-8 sm:mt-0"),l(ie,"class","mt-2 sm:-mb-8 sm:mt-0"),l(E,"class","label inline-flex cursor-pointer content-end justify-start gap-4"),l(Ee,"class","label"),l(Ee,"for","keepalive"),l(W,"type","number"),l(W,"min","1"),l(W,"max","600"),l(W,"class",et="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[3].keep_alive?"border-error border-2":"")),l(W,"id","keepalive"),W.required=!0,l(ge,"for","keepalive"),l(ge,"class","input-group"),l(He,"class",tt="label-text-alt text-error "+(n[3].keep_alive?"":"hidden")),l(Ve,"for","keepalive"),l(Ve,"class","label"),l(De,"class","label"),l(De,"for","maxtopic"),l(ue,"type","number"),l(ue,"min","64"),l(ue,"max","4096"),l(ue,"class",rt="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[3].topic_length?"border-error border-2":"")),l(ue,"id","maxtopic"),ue.required=!0,l(Ae,"for","maxtopic"),l(Ae,"class","input-group"),l(je,"class",lt="label-text-alt text-error "+(n[3].topic_length?"":"hidden")),l(Ue,"for","maxtopic"),l(Ue,"class","label"),l(r,"class","grid w-full grid-cols-1 content-center gap-x-4 px-4 sm:grid-cols-2"),l(Ye,"class","divider mb-2 mt-0"),l(Qe,"class","mx-4 flex flex-wrap justify-end gap-2"),e.noValidate=!0},m(w,$){ne(w,e,$),a(e,r),a(r,t),a(t,o),o.checked=n[0].enabled,a(t,s),a(t,c),a(r,f),a(r,y),a(r,N),a(r,I),a(I,k),a(I,Q),a(I,m),G(m,n[0].host),a(I,V),a(I,H),a(H,Z),a(Z,ce),a(r,U),a(r,z),a(z,D),a(z,F),a(z,M),G(M,n[0].port),a(z,g),a(z,S),a(S,j),a(j,Ce),a(r,ee),a(r,te),a(te,re),a(te,ke),a(te,se),G(se,n[0].username),a(r,xe),a(r,le),a(le,ve),a(le,Pe),be(ae,le,null),a(r,Te),a(r,ye),a(ye,K),a(ye,Ne),a(ye,de),G(de,n[0].client_id),a(r,T),a(r,E),a(E,fe),fe.checked=n[0].clean_session,a(E,Ie),a(E,ie),a(r,ze),a(r,Y),a(Y,Ee),a(Y,Me),a(Y,ge),a(ge,W),G(W,n[0].keep_alive),a(ge,gt),a(ge,Re),a(Y,wt),a(Y,Ve),a(Ve,He),a(He,kt),a(r,xt),a(r,Se),a(Se,De),a(Se,Tt),a(Se,Ae),a(Ae,ue),G(ue,n[0].max_topic_length),a(Ae,Et),a(Ae,Oe),a(Se,Lt),a(Se,Ue),a(Ue,je),a(je,$t),a(e,Ct),a(e,Ye),a(e,yt),a(e,Qe),n[19](e),we=!0,It||(Nt=[pe(o,"change",n[10]),pe(m,"input",n[11]),pe(M,"input",n[12]),pe(se,"input",n[13]),pe(de,"input",n[15]),pe(fe,"change",n[16]),pe(W,"input",n[17]),pe(ue,"input",n[18]),pe(e,"submit",Xt(n[9]))],It=!0)},p(w,$){$&1&&(o.checked=w[0].enabled),(!we||$&8&&O!==(O="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[3].host?"border-error border-2":"")))&&l(m,"class",O),$&1&&m.value!==w[0].host&&G(m,w[0].host),(!we||$&8&&A!==(A="label-text-alt text-error "+(w[3].host?"":"hidden")))&&l(Z,"class",A),(!we||$&8&&L!==(L="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[3].port?"border-error border-2":"")))&&l(M,"class",L),$&1&&Ke(M.value)!==w[0].port&&G(M,w[0].port),(!we||$&8&&R!==(R="label-text-alt text-error "+(w[3].port?"":"hidden")))&&l(j,"class",R),$&1&&se.value!==w[0].username&&G(se,w[0].username);const q={};!Be&&$&1&&(Be=!0,q.value=w[0].password,hr(()=>Be=!1)),ae.$set(q),$&1&&de.value!==w[0].client_id&&G(de,w[0].client_id),$&1&&(fe.checked=w[0].clean_session),(!we||$&8&&et!==(et="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[3].keep_alive?"border-error border-2":"")))&&l(W,"class",et),$&1&&Ke(W.value)!==w[0].keep_alive&&G(W,w[0].keep_alive),(!we||$&8&&tt!==(tt="label-text-alt text-error "+(w[3].keep_alive?"":"hidden")))&&l(He,"class",tt),(!we||$&8&&rt!==(rt="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[3].topic_length?"border-error border-2":"")))&&l(ue,"class",rt),$&1&&Ke(ue.value)!==w[0].max_topic_length&&G(ue,w[0].max_topic_length),(!we||$&8&&lt!==(lt="label-text-alt text-error "+(w[3].topic_length?"":"hidden")))&&l(je,"class",lt)},i(w){we||(J(ae.$$.fragment,w),we=!0)},o(w){X(ae.$$.fragment,w),we=!1},d(w){w&&d(e),_e(ae),n[19](null),It=!1,Wt(Nt)}}}function Dr(n){let e,r="Change MQTT Settings";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),B(e)!=="svelte-1pncc4g"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){ne(t,e,o)},p:C,d(t){t&&d(e)}}}function qr(n){let e,r,t,o,s={ctx:n,current:null,token:null,hasCatch:!1,pending:Sr,then:Cr,catch:$r,value:22,blocks:[,,,]};tr(n[7](),s);let c=(!n[5].data.features.security||n[4].admin)&&Kt(n);return{c(){e=i("div"),s.block.c(),r=_(),c&&c.c(),t=Zt(),this.h()},l(p){e=u(p,"DIV",{class:!0});var f=b(e);s.block.l(f),f.forEach(d),r=v(p),c&&c.l(p),t=Zt(),this.h()},h(){l(e,"class","w-full overflow-x-auto")},m(p,f){ne(p,e,f),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,ne(p,r,f),c&&c.m(p,f),ne(p,t,f),o=!0},p(p,f){n=p,rr(s,n,f),!n[5].data.features.security||n[4].admin?c?(c.p(n,f),f&48&&J(c,1)):(c=Kt(n),c.c(),J(c,1),c.m(t.parentNode,t)):c&&(mr(),X(c,1,1,()=>{c=null}),br())},i(p){o||(J(s.block),J(c),o=!0)},o(p){for(let f=0;f<3;f+=1){const y=s.blocks[f];X(y)}X(c),o=!1},d(p){p&&(d(e),d(r),d(t)),s.block.d(),s.token=null,s=null,c&&c.d(p)}}}function Pr(n){let e,r;return e=new At({props:{slot:"icon",class:"lex-shrink-0 mr-2 h-6 w-6 self-end"}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p:C,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Br(n){let e,r="MQTT";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),B(e)!=="svelte-onyccr"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){ne(t,e,o)},p:C,d(t){t&&d(e)}}}function Nr(n){let e,r;return e=new ar({props:{collapsible:!1,$$slots:{title:[Br],icon:[Pr],default:[qr]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p(t,[o]){const s={};o&8388671&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Vr(n,e,r){let t,o;dt(n,lr,h=>r(4,t=h)),dt(n,nr,h=>r(5,o=h));let s,c,p;const f=["TCP Disconnected","Unacceptable Protocol Version","Identifier Rejected","Server unavailable","Malformed Credentials","Not Authorized","Not Enough Memory","TLS Rejected"];async function y(){try{const h=await fetch("/rest/mqttStatus",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(1,c=await h.json())}catch(h){console.error("Error:",h)}return c}async function N(){try{const h=await fetch("/rest/mqttSettings",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(0,s=await h.json())}catch(h){console.error("Error:",h)}return s}const I=setInterval(async()=>{y()},5e3);fr(()=>clearInterval(I)),pr(()=>{(!o.data.features.security||t.admin)&&N()});let k={host:!1,port:!1,keep_alive:!1,topic_length:!1};async function x(h){try{const F=await fetch("/rest/mqttSettings",{method:"POST",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"},body:JSON.stringify(h)});F.status==200?(mt.success("Security settings updated.",3e3),r(0,s=await F.json())):mt.error("User not authorized.",3e3)}catch(F){console.error("Error:",F)}}function Q(){let h=!0;const F=/\b(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))\b/;!/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i.test(s.host)&&!F.test(s.host)?(h=!1,r(3,k.host=!0,k)):r(3,k.host=!1,k);let L=Number(s.port);0<=L&&L<=65536?r(3,k.port=!1,k):(r(3,k.port=!0,k),h=!1);let g=Number(s.keep_alive);1<=g&&g<=600?r(3,k.keep_alive=!1,k):(r(3,k.keep_alive=!0,k),h=!1),h&&x(s)}function m(){s.enabled=this.checked,r(0,s)}function O(){s.host=this.value,r(0,s)}function V(){s.port=Ke(this.value),r(0,s)}function H(){s.username=this.value,r(0,s)}function Z(h){n.$$.not_equal(s.password,h)&&(s.password=h,r(0,s))}function ce(){s.client_id=this.value,r(0,s)}function A(){s.clean_session=this.checked,r(0,s)}function U(){s.keep_alive=Ke(this.value),r(0,s)}function z(){s.max_topic_length=Ke(this.value),r(0,s)}function D(h){St[h?"unshift":"push"](()=>{p=h,r(2,p)})}return[s,c,p,k,t,o,f,y,N,Q,m,O,V,H,Z,ce,A,U,z,D]}class Hr extends _t{constructor(e){super(),vt(this,e,Vr,Nr,bt,{})}}function Ur(n){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function jr(n){let e,r,t,o,s,c=`The LED is controllable via MQTT with the demo project designed to work with Home\r
						Assistant's auto discovery feature.`,p,f,y,N,I='<span class="label-text text-md">Unique ID</span>',k,x,Q,m,O,V,H,Z,ce,A,U,z='<span class="label-text text-md">Name</span>',D,h,F,M,L,g,S,j,Ce,R,ee,te='<span class="label-text text-md">MQTT Path</span>',re,P,ke,se,xe,le,ve,qe,Pe,ae,Be,Te,ye='<button class="btn btn-primary" type="submit">Apply Settings</button>',K,oe,Ne,de;return t=new kr({props:{class:"h-6 w-6 flex-shrink-0 stroke-current"}}),{c(){e=i("form"),r=i("div"),he(t.$$.fragment),o=_(),s=i("span"),s.textContent=c,p=_(),f=i("div"),y=i("div"),N=i("label"),N.innerHTML=I,k=_(),x=i("input"),m=_(),O=i("label"),V=i("span"),H=Le("Unique ID must be between 3 and 32 characters long"),ce=_(),A=i("div"),U=i("label"),U.innerHTML=z,D=_(),h=i("input"),M=_(),L=i("label"),g=i("span"),S=Le("Name must be between 3 and 32 characters long"),Ce=_(),R=i("div"),ee=i("label"),ee.innerHTML=te,re=_(),P=i("input"),se=_(),xe=i("label"),le=i("span"),ve=Le("MQTT path is limited to 64 characters"),Pe=_(),ae=i("div"),Be=_(),Te=i("div"),Te.innerHTML=ye,this.h()},l(T){e=u(T,"FORM",{});var E=b(e);r=u(E,"DIV",{class:!0});var fe=b(r);me(t.$$.fragment,fe),o=v(fe),s=u(fe,"SPAN",{"data-svelte-h":!0}),B(s)!=="svelte-1r3kcmm"&&(s.textContent=c),fe.forEach(d),p=v(E),f=u(E,"DIV",{class:!0});var Ie=b(f);y=u(Ie,"DIV",{});var ie=b(y);N=u(ie,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(N)!=="svelte-qfhemx"&&(N.innerHTML=I),k=v(ie),x=u(ie,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),m=v(ie),O=u(ie,"LABEL",{class:!0,for:!0});var We=b(O);V=u(We,"SPAN",{class:!0});var ze=b(V);H=$e(ze,"Unique ID must be between 3 and 32 characters long"),ze.forEach(d),We.forEach(d),ie.forEach(d),ce=v(Ie),A=u(Ie,"DIV",{});var Y=b(A);U=u(Y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(U)!=="svelte-1ds62kb"&&(U.innerHTML=z),D=v(Y),h=u(Y,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),M=v(Y),L=u(Y,"LABEL",{class:!0,for:!0});var Ee=b(L);g=u(Ee,"SPAN",{class:!0});var Xe=b(g);S=$e(Xe,"Name must be between 3 and 32 characters long"),Xe.forEach(d),Ee.forEach(d),Y.forEach(d),Ce=v(Ie),R=u(Ie,"DIV",{});var Me=b(R);ee=u(Me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(ee)!=="svelte-10qo2tt"&&(ee.innerHTML=te),re=v(Me),P=u(Me,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),se=v(Me),xe=u(Me,"LABEL",{class:!0,for:!0});var ge=b(xe);le=u(ge,"SPAN",{class:!0});var W=b(le);ve=$e(W,"MQTT path is limited to 64 characters"),W.forEach(d),ge.forEach(d),Me.forEach(d),Ie.forEach(d),Pe=v(E),ae=u(E,"DIV",{class:!0}),b(ae).forEach(d),Be=v(E),Te=u(E,"DIV",{class:!0,"data-svelte-h":!0}),B(Te)!=="svelte-19wrugp"&&(Te.innerHTML=ye),E.forEach(d),this.h()},h(){l(r,"class","alert alert-info my-2 shadow-lg"),l(N,"class","label"),l(N,"for","uid"),l(x,"type","text"),l(x,"class",Q="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[2].uid?"border-error border-2":"")),l(x,"id","uid"),l(x,"min","3"),l(x,"max","32"),x.required=!0,l(V,"class",Z="label-text-alt text-error "+(n[2].uid?"":"hidden")),l(O,"class","label"),l(O,"for","uid"),l(U,"class","label"),l(U,"for","name"),l(h,"type","text"),l(h,"class",F="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[2].name?"border-error border-2":"")),l(h,"id","name"),l(h,"min","3"),l(h,"max","32"),h.required=!0,l(g,"class",j="label-text-alt text-error "+(n[2].name?"":"hidden")),l(L,"class","label"),l(L,"for","name"),l(ee,"class","label"),l(ee,"for","path"),l(P,"type","text"),l(P,"class",ke="input input-bordered invalid:border-error w-full invalid:border-2 "+(n[2].path?"border-error border-2":"")),l(P,"id","path"),l(P,"min","0"),l(P,"max","64"),P.required=!0,l(le,"class",qe="label-text-alt text-error "+(n[2].path?"":"hidden")),l(xe,"class","label"),l(xe,"for","path"),l(f,"class","grid w-full grid-cols-1 content-center gap-x-4 px-4"),l(ae,"class","divider mb-2 mt-0"),l(Te,"class","mx-4 flex flex-wrap justify-end gap-2"),e.noValidate=!0},m(T,E){ne(T,e,E),a(e,r),be(t,r,null),a(r,o),a(r,s),a(e,p),a(e,f),a(f,y),a(y,N),a(y,k),a(y,x),G(x,n[0].unique_id),a(y,m),a(y,O),a(O,V),a(V,H),a(f,ce),a(f,A),a(A,U),a(A,D),a(A,h),G(h,n[0].name),a(A,M),a(A,L),a(L,g),a(g,S),a(f,Ce),a(f,R),a(R,ee),a(R,re),a(R,P),G(P,n[0].mqtt_path),a(R,se),a(R,xe),a(xe,le),a(le,ve),a(e,Pe),a(e,ae),a(e,Be),a(e,Te),n[8](e),oe=!0,Ne||(de=[pe(x,"input",n[5]),pe(h,"input",n[6]),pe(P,"input",n[7]),pe(e,"submit",Xt(n[4]))],Ne=!0)},p(T,E){(!oe||E&4&&Q!==(Q="input input-bordered invalid:border-error w-full invalid:border-2 "+(T[2].uid?"border-error border-2":"")))&&l(x,"class",Q),E&1&&x.value!==T[0].unique_id&&G(x,T[0].unique_id),(!oe||E&4&&Z!==(Z="label-text-alt text-error "+(T[2].uid?"":"hidden")))&&l(V,"class",Z),(!oe||E&4&&F!==(F="input input-bordered invalid:border-error w-full invalid:border-2 "+(T[2].name?"border-error border-2":"")))&&l(h,"class",F),E&1&&h.value!==T[0].name&&G(h,T[0].name),(!oe||E&4&&j!==(j="label-text-alt text-error "+(T[2].name?"":"hidden")))&&l(g,"class",j),(!oe||E&4&&ke!==(ke="input input-bordered invalid:border-error w-full invalid:border-2 "+(T[2].path?"border-error border-2":"")))&&l(P,"class",ke),E&1&&P.value!==T[0].mqtt_path&&G(P,T[0].mqtt_path),(!oe||E&4&&qe!==(qe="label-text-alt text-error "+(T[2].path?"":"hidden")))&&l(le,"class",qe)},i(T){oe||(J(t.$$.fragment,T),T&&er(()=>{oe&&(K||(K=ft(e,ht,{duration:300,easing:pt},!0)),K.run(1))}),oe=!0)},o(T){X(t.$$.fragment,T),T&&(K||(K=ft(e,ht,{duration:300,easing:pt},!1)),K.run(0)),oe=!1},d(T){T&&d(e),_e(t),n[8](null),T&&K&&K.end(),Ne=!1,Wt(de)}}}function Qr(n){let e,r;return e=new sr({}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p:C,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function zr(n){let e,r,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Qr,then:jr,catch:Ur,value:12,blocks:[,,,]};return tr(n[3](),t),{c(){e=i("div"),t.block.c(),this.h()},l(o){e=u(o,"DIV",{class:!0});var s=b(e);t.block.l(s),s.forEach(d),this.h()},h(){l(e,"class","w-full overflow-x-auto")},m(o,s){ne(o,e,s),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,r=!0},p(o,s){n=o,rr(t,n,s)},i(o){r||(J(t.block),r=!0)},o(o){for(let s=0;s<3;s+=1){const c=t.blocks[s];X(c)}r=!1},d(o){o&&d(e),t.block.d(),t.token=null,t=null}}}function Rr(n){let e,r;return e=new At({props:{slot:"icon",class:"lex-shrink-0 mr-2 h-6 w-6 self-end"}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p:C,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Or(n){let e,r="MQTT Broker Settings";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),B(e)!=="svelte-xvjdcx"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){ne(t,e,o)},p:C,d(t){t&&d(e)}}}function Fr(n){let e,r;return e=new ar({props:{collapsible:!0,open:!1,$$slots:{title:[Or],icon:[Rr],default:[zr]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,o){be(e,t,o),r=!0},p(t,[o]){const s={};o&8199&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),r=!1},d(t){_e(e,t)}}}function Gr(n,e,r){let t,o;dt(n,lr,m=>r(9,t=m)),dt(n,nr,m=>r(10,o=m));let s,c;async function p(){try{const m=await fetch("/rest/brokerSettings",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(0,s=await m.json())}catch(m){console.error("Error:",m)}}let f={uid:!1,path:!1,name:!1};async function y(){try{const m=await fetch("/rest/brokerSettings",{method:"POST",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"},body:JSON.stringify(s)});m.status==200?(mt.success("Broker settings updated.",3e3),r(0,s=await m.json())):mt.error("User not authorized.",3e3)}catch(m){console.error("Error:",m)}}function N(){let m=!0;s.unique_id.length<3||s.unique_id.length>32?(m=!1,r(2,f.uid=!0,f)):r(2,f.uid=!1,f),s.name.length<3||s.name.length>32?(m=!1,r(2,f.name=!0,f)):r(2,f.name=!1,f),s.mqtt_path.length>64?(m=!1,r(2,f.path=!0,f)):r(2,f.path=!1,f),m&&y()}function I(){s.unique_id=this.value,r(0,s)}function k(){s.name=this.value,r(0,s)}function x(){s.mqtt_path=this.value,r(0,s)}function Q(m){St[m?"unshift":"push"](()=>{c=m,r(1,c)})}return[s,c,f,p,N,I,k,x,Q]}class Jr extends _t{constructor(e){super(),vt(this,e,Gr,Fr,bt,{})}}function Zr(n){let e,r,t,o,s;return r=new Hr({}),o=new Jr({}),{c(){e=i("div"),he(r.$$.fragment),t=_(),he(o.$$.fragment),this.h()},l(c){e=u(c,"DIV",{class:!0});var p=b(e);me(r.$$.fragment,p),t=v(p),me(o.$$.fragment,p),p.forEach(d),this.h()},h(){l(e,"class","mx-0 my-1 flex flex-col space-y-4 sm:mx-8 sm:my-8")},m(c,p){ne(c,e,p),be(r,e,null),a(e,t),be(o,e,null),s=!0},p:C,i(c){s||(J(r.$$.fragment,c),J(o.$$.fragment,c),s=!0)},o(c){X(r.$$.fragment,c),X(o.$$.fragment,c),s=!1},d(c){c&&d(e),_e(r),_e(o)}}}function Kr(n,e,r){let{data:t}=e;return n.$$set=o=>{"data"in o&&r(0,t=o.data)},[t]}class cl extends _t{constructor(e){super(),vt(this,e,Kr,Zr,bt,{data:0})}}export{cl as component,ul as universal};
