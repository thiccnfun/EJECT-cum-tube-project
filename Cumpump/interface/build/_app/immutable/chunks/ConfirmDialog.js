import{o as Y,s as Ce,e as ee,n as pe,h as _e,f as Ue,k as Xe,r as ze}from"./utils.js";import{q as Te,H as Le,r as qe,g as B,u as De,d as M,v as ve,i as ye,e as xe,p as se,b as q,k as oe,s as ne,f as D,l as fe,c as re,h as R,w as S,y as le,m as ue,x as Ye,L as Me}from"./scheduler.js";import{S as Ee,i as Se,a as J,g as we,t as $,c as ke,b as ce,d as Pe,m as de,e as he,p as Ae}from"./index.js";import{w as be}from"./index3.js";import{g as Ve,f as Ke}from"./index2.js";const ge=be(!1),me=be(null),U=be([]),je=be(null);function pt(){var r,s;const i=Y(U).length,t=Y(U)[i-1];return(r=t==null?void 0:t.callbacks)!=null&&r.onBeforeClose&&((s=t==null?void 0:t.callbacks)==null?void 0:s.onBeforeClose())===!1?!1:(U.set([]),!0)}function Ge(i=1){var s,f;const t=Y(U).length,r=Y(U)[t-1];return Y(me)||(s=r==null?void 0:r.callbacks)!=null&&s.onBeforeClose&&((f=r==null?void 0:r.callbacks)==null?void 0:f.onBeforeClose())===!1?!1:(Y(ge)&&t>0&&me.set(!0),ge.set(!1),je.set("pop"),Je(i),!0)}function Ie(){return Ge(1)}function _t(i,t,r){Y(me)||(je.set("push"),Y(ge)&&Y(U).length&&me.set(!0),ge.set(!1),r!=null&&r.replace?U.update(s=>[...s.slice(0,s.length-1),{component:i,props:t}]):U.update(s=>[...s,{component:i,props:t}]))}function vt(i){U.update(t=>{const r=t[t.length-1];return r.callbacks={...r.callbacks,onBeforeClose:i},t})}function Je(i=1){U.update(t=>t.slice(0,Math.max(0,t.length-i)))}function Qe(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ne={exports:{}};(function(i){(function(t,r,s){if(!t)return;for(var f={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},m={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P,x=1;x<20;++x)f[111+x]="f"+x;for(x=0;x<=9;++x)f[x+96]=x.toString();function a(e,n,u){if(e.addEventListener){e.addEventListener(n,u,!1);return}e.attachEvent("on"+n,u)}function w(e){if(e.type=="keypress"){var n=String.fromCharCode(e.which);return e.shiftKey||(n=n.toLowerCase()),n}return f[e.which]?f[e.which]:g[e.which]?g[e.which]:String.fromCharCode(e.which).toLowerCase()}function A(e,n){return e.sort().join(",")===n.sort().join(",")}function V(e){var n=[];return e.shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n}function L(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function k(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function j(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function I(){if(!P){P={};for(var e in f)e>95&&e<112||f.hasOwnProperty(e)&&(P[f[e]]=e)}return P}function Q(e,n,u){return u||(u=I()[e]?"keydown":"keypress"),u=="keypress"&&n.length&&(u="keydown"),u}function te(e){return e==="+"?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function O(e,n){var u,p,T,N=[];for(u=te(e),T=0;T<u.length;++T)p=u[T],m[p]&&(p=m[p]),n&&n!="keypress"&&c[p]&&(p=c[p],N.push("shift")),j(p)&&N.push(p);return n=Q(p,N,n),{key:p,modifiers:N,action:n}}function y(e,n){return e===null||e===r?!1:e===n?!0:y(e.parentNode,n)}function b(e){var n=this;if(e=e||r,!(n instanceof b))return new b(e);n.target=e,n._callbacks={},n._directMap={};var u={},p,T=!1,N=!1,H=!1;function W(o){o=o||{};var l=!1,_;for(_ in u){if(o[_]){l=!0;continue}u[_]=0}l||(H=!1)}function X(o,l,_,d,h,K){var v,E,z=[],G=_.type;if(!n._callbacks[o])return[];for(G=="keyup"&&j(o)&&(l=[o]),v=0;v<n._callbacks[o].length;++v)if(E=n._callbacks[o][v],!(!d&&E.seq&&u[E.seq]!=E.level)&&G==E.action&&(G=="keypress"&&!_.metaKey&&!_.ctrlKey||A(l,E.modifiers))){var He=!d&&E.combo==h,Re=d&&E.seq==d&&E.level==K;(He||Re)&&n._callbacks[o].splice(v,1),z.push(E)}return z}function Z(o,l,_,d){n.stopCallback(l,l.target||l.srcElement,_,d)||o(l,_)===!1&&(L(l),k(l))}n._handleKey=function(o,l,_){var d=X(o,l,_),h,K={},v=0,E=!1;for(h=0;h<d.length;++h)d[h].seq&&(v=Math.max(v,d[h].level));for(h=0;h<d.length;++h){if(d[h].seq){if(d[h].level!=v)continue;E=!0,K[d[h].seq]=1,Z(d[h].callback,_,d[h].combo,d[h].seq);continue}E||Z(d[h].callback,_,d[h].combo)}var z=_.type=="keypress"&&N;_.type==H&&!j(o)&&!z&&W(K),N=E&&_.type=="keydown"};function F(o){typeof o.which!="number"&&(o.which=o.keyCode);var l=w(o);if(l){if(o.type=="keyup"&&T===l){T=!1;return}n.handleKey(l,V(o),o)}}function ie(){clearTimeout(p),p=setTimeout(W,1e3)}function ae(o,l,_,d){u[o]=0;function h(G){return function(){H=G,++u[o],ie()}}function K(G){Z(_,G,o),d!=="keyup"&&(T=w(G)),setTimeout(W,10)}for(var v=0;v<l.length;++v){var E=v+1===l.length,z=E?K:h(d||O(l[v+1]).action);C(l[v],z,d,o,v)}}function C(o,l,_,d,h){n._directMap[o+":"+_]=l,o=o.replace(/\s+/g," ");var K=o.split(" "),v;if(K.length>1){ae(o,K,l,_);return}v=O(o,_),n._callbacks[v.key]=n._callbacks[v.key]||[],X(v.key,v.modifiers,{type:v.action},d,o,h),n._callbacks[v.key][d?"unshift":"push"]({callback:l,modifiers:v.modifiers,action:v.action,seq:d,level:h,combo:o})}n._bindMultiple=function(o,l,_){for(var d=0;d<o.length;++d)C(o[d],l,_)},a(e,"keypress",F),a(e,"keydown",F),a(e,"keyup",F)}b.prototype.bind=function(e,n,u){var p=this;return e=e instanceof Array?e:[e],p._bindMultiple.call(p,e,n,u),p},b.prototype.unbind=function(e,n){var u=this;return u.bind.call(u,e,function(){},n)},b.prototype.trigger=function(e,n){var u=this;return u._directMap[e+":"+n]&&u._directMap[e+":"+n]({},e),u},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,n){var u=this;if((" "+n.className+" ").indexOf(" mousetrap ")>-1||y(n,u.target))return!1;if("composedPath"in e&&typeof e.composedPath=="function"){var p=e.composedPath()[0];p!==e.target&&(n=p)}return n.tagName=="INPUT"||n.tagName=="SELECT"||n.tagName=="TEXTAREA"||n.isContentEditable},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var n in e)e.hasOwnProperty(n)&&(f[n]=e[n]);P=null},b.init=function(){var e=b(r);for(var n in e)n.charAt(0)!=="_"&&(b[n]=function(u){return function(){return e[u].apply(e,arguments)}}(n))},b.init(),t.Mousetrap=b,i.exports&&(i.exports=b),typeof s=="function"&&s.amd&&s(function(){return b})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Ne);var We=Ne.exports;const Be=Qe(We);function Ze(i){return(...t)=>i.reduce((r,s)=>r=[s(...r)],t||[])}function Fe(i){let t=document.defaultView.getComputedStyle(i,null);return t.getPropertyValue("display")!=="none"&&t.getPropertyValue("visibility")!=="hidden"}const $e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];function et(i){const t={"alt+tab":m,end:x,home:P,"shift+tab":m,down:c,tab:c,up:m};Object.entries(t).forEach(([a,w])=>{Be.bind(a,Ze([A=>({event:A}),r,s,f,g,w]))});function r(a){return a.event.preventDefault(),a}function s(a){return a.event.stopPropagation(),a}function f(a){let w=[...i.querySelectorAll($e)];return{...a,allFocusableItems:w.filter(Fe)}}function g(a){let w=document.activeElement;return w&&!i.contains(w)?a:{...a,currentlyFocusedItem:w}}function c({allFocusableItems:a,currentlyFocusedItem:w}){if(!w){a[0]&&a[0].focus();return}let A=a.indexOf(w);if(a.length-1===A){a[0]&&a[0].focus();return}a[A+1]&&a[A+1].focus()}function m({allFocusableItems:a,currentlyFocusedItem:w}){if(!w){a[a.length-1].focus();return}let A=a.indexOf(w);if(A===0){a[a.length-1]&&a[a.length-1].focus();return}a[A-1]&&a[A-1].focus()}function P({allFocusableItems:a}){a[0]&&a[0].focus()}function x({allFocusableItems:a}){a[a.length-1].focus()}return{destroy(){Object.keys(t).forEach(a=>Be.unbind(a))}}}function tt(i){let t,r,s='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/>',f=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},i[0]],g={};for(let c=0;c<f.length;c+=1)g=ee(g,f[c]);return{c(){t=Te("svg"),r=new Le(!0),this.h()},l(c){t=qe(c,"svg",{viewBox:!0,width:!0,height:!0});var m=B(t);r=De(m,!0),m.forEach(M),this.h()},h(){r.a=null,ve(t,g)},m(c,m){ye(c,t,m),r.m(s,t)},p(c,[m]){ve(t,g=Ve(f,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},m&1&&c[0]]))},i:pe,o:pe,d(c){c&&M(t)}}}function nt(i,t,r){return i.$$set=s=>{r(0,t=ee(ee({},t),_e(s)))},t=_e(t),[t]}class rt extends Ee{constructor(t){super(),Se(this,t,nt,tt,Ce,{})}}function it(i){let t,r,s='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 12l5 5L20 7"/>',f=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},i[0]],g={};for(let c=0;c<f.length;c+=1)g=ee(g,f[c]);return{c(){t=Te("svg"),r=new Le(!0),this.h()},l(c){t=qe(c,"svg",{viewBox:!0,width:!0,height:!0});var m=B(t);r=De(m,!0),m.forEach(M),this.h()},h(){r.a=null,ve(t,g)},m(c,m){ye(c,t,m),r.m(s,t)},p(c,[m]){ve(t,g=Ve(f,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},m&1&&c[0]]))},i:pe,o:pe,d(c){c&&M(t)}}}function at(i,t,r){return i.$$set=s=>{r(0,t=ee(ee({},t),_e(s)))},t=_e(t),[t]}class st extends Ee{constructor(t){super(),Se(this,t,at,it,Ce,{})}}function Oe(i){var F,ie,ae;let t,r,s,f,g,c,m,P,x,a,w,A,V,L,k,j,I=((F=i[4])==null?void 0:F.cancel.label)+"",Q,te,O,y,b,e=((ie=i[4])==null?void 0:ie.confirm.label)+"",n,u,p,T,N;var H=i[4].cancel.icon;function W(C,o){return{props:{class:"mr-2 h-5 w-5"}}}H&&(k=se(H,W()));var X=(ae=i[4])==null?void 0:ae.confirm.icon;function Z(C,o){return{props:{class:"mr-2 h-5 w-5"}}}return X&&(y=se(X,Z())),{c(){t=q("div"),r=q("div"),s=q("h2"),f=oe(i[1]),g=ne(),c=q("div"),m=ne(),P=q("p"),x=oe(i[2]),a=ne(),w=q("div"),A=ne(),V=q("div"),L=q("button"),k&&ce(k.$$.fragment),j=q("span"),Q=oe(I),te=ne(),O=q("button"),y&&ce(y.$$.fragment),b=q("span"),n=oe(e),this.h()},l(C){t=D(C,"DIV",{role:!0,class:!0});var o=B(t);r=D(o,"DIV",{class:!0});var l=B(r);s=D(l,"H2",{class:!0});var _=B(s);f=fe(_,i[1]),_.forEach(M),g=re(l),c=D(l,"DIV",{class:!0}),B(c).forEach(M),m=re(l),P=D(l,"P",{class:!0});var d=B(P);x=fe(d,i[2]),d.forEach(M),a=re(l),w=D(l,"DIV",{class:!0}),B(w).forEach(M),A=re(l),V=D(l,"DIV",{class:!0});var h=B(V);L=D(h,"BUTTON",{class:!0});var K=B(L);k&&Pe(k.$$.fragment,K),j=D(K,"SPAN",{});var v=B(j);Q=fe(v,I),v.forEach(M),K.forEach(M),te=re(h),O=D(h,"BUTTON",{class:!0});var E=B(O);y&&Pe(y.$$.fragment,E),b=D(E,"SPAN",{});var z=B(b);n=fe(z,e),z.forEach(M),E.forEach(M),h.forEach(M),l.forEach(M),o.forEach(M),this.h()},h(){R(s,"class","text-base-content text-start text-2xl font-bold"),R(c,"class","divider my-2"),R(P,"class","text-base-content mb-1 text-start"),R(w,"class","divider my-2"),R(L,"class","btn btn-primary inline-flex items-center"),R(O,"class","btn btn-warning text-warning-content inline-flex items-center"),R(V,"class","flex justify-end gap-2"),R(r,"class","rounded-box bg-base-100 shadow-secondary/30 pointer-events-auto flex min-w-fit max-w-md flex-col justify-between p-4 shadow-lg"),R(t,"role","dialog"),R(t,"class","pointer-events-none fixed inset-0 z-50 flex items-center justify-center")},m(C,o){ye(C,t,o),S(t,r),S(r,s),S(s,f),S(r,g),S(r,c),S(r,m),S(r,P),S(P,x),S(r,a),S(r,w),S(r,A),S(r,V),S(V,L),k&&de(k,L,null),S(L,j),S(j,Q),S(V,te),S(V,O),y&&de(y,O,null),S(O,b),S(b,n),p=!0,T||(N=[le(L,"click",Ie),le(O,"click",function(){Ue(i[3])&&i[3].apply(this,arguments)}),le(t,"introstart",i[5]),le(t,"outroend",i[6]),Xe(et.call(null,t))],T=!0)},p(C,o){var l,_,d;if(i=C,(!p||o&2)&&ue(f,i[1]),(!p||o&4)&&ue(x,i[2]),o&16&&H!==(H=i[4].cancel.icon)){if(k){we();const h=k;$(h.$$.fragment,1,0,()=>{he(h,1)}),ke()}H?(k=se(H,W()),ce(k.$$.fragment),J(k.$$.fragment,1),de(k,L,j)):k=null}if((!p||o&16)&&I!==(I=((l=i[4])==null?void 0:l.cancel.label)+"")&&ue(Q,I),o&16&&X!==(X=(_=i[4])==null?void 0:_.confirm.icon)){if(y){we();const h=y;$(h.$$.fragment,1,0,()=>{he(h,1)}),ke()}X?(y=se(X,Z()),ce(y.$$.fragment),J(y.$$.fragment,1),de(y,O,b)):y=null}(!p||o&16)&&e!==(e=((d=i[4])==null?void 0:d.confirm.label)+"")&&ue(n,e)},i(C){p||(k&&J(k.$$.fragment,C),y&&J(y.$$.fragment,C),C&&Ye(()=>{p&&(u||(u=Ae(t,Ke,{y:50},!0)),u.run(1))}),p=!0)},o(C){k&&$(k.$$.fragment,C),y&&$(y.$$.fragment,C),C&&(u||(u=Ae(t,Ke,{y:50},!1)),u.run(0)),p=!1},d(C){C&&M(t),k&&he(k),y&&he(y),C&&u&&u.end(),T=!1,ze(N)}}}function ot(i){let t,r,s=i[0]&&Oe(i);return{c(){s&&s.c(),t=xe()},l(f){s&&s.l(f),t=xe()},m(f,g){s&&s.m(f,g),ye(f,t,g),r=!0},p(f,[g]){f[0]?s?(s.p(f,g),g&1&&J(s,1)):(s=Oe(f),s.c(),J(s,1),s.m(t.parentNode,t)):s&&(we(),$(s,1,1,()=>{s=null}),ke())},i(f){r||(J(s),r=!0)},o(f){$(s),r=!1},d(f){f&&M(t),s&&s.d(f)}}}function ft(i,t,r){let{isOpen:s}=t,{title:f}=t,{message:g}=t,{onConfirm:c}=t,{labels:m={cancel:{label:"Cancel",icon:rt},confirm:{label:"OK",icon:st}}}=t;function P(a){Me.call(this,i,a)}function x(a){Me.call(this,i,a)}return i.$$set=a=>{"isOpen"in a&&r(0,s=a.isOpen),"title"in a&&r(1,f=a.title),"message"in a&&r(2,g=a.message),"onConfirm"in a&&r(3,c=a.onConfirm),"labels"in a&&r(4,m=a.labels)},[s,f,g,c,m,P,x]}class gt extends Ee{constructor(t){super(),Se(this,t,ft,ot,Ce,{isOpen:0,title:1,message:2,onConfirm:3,labels:4})}}export{gt as C,rt as X,Ie as a,vt as b,pt as c,st as d,ge as e,et as f,U as m,_t as o,me as t};
